#7.障害物とリスタート

このままでは誰でも確実にゲームをクリアしてしまいます。
そこで、「ぶつかってはいけない壁にぶつかったらゲームオーバー」のルールを追加します。

要素を分解すると以下の要素を追加すれば良さそうです。

1.  「ぶつかってはいけない壁」の設定
2.  壁にぶつかった際のイベントを設定
3.  ぶつかった際にシーンを再ロードする

##ぶつかってはいけない壁の作成

まずは「ぶつかってはいけない壁」を作成します。

###Danger Wallプレハブの作成

1.  HIerachyビューのCreateをクリックします。
2.  3D Object > Cubeを選択します。
3.  作成したオブジェクト名は"Danger Wall"とします。
4.  作成したDanger WallオブジェクトはPrefabに設定します。

###Danger Wallの配置

次にDanger Wallを幾つか配置します。
この部分は好きな様に配置して構いません。但しゲームがクリア出来なくなるのでItemの位置に被らないようにして下さい。

例えば、以下のように配置します。

##ぶつかったら判定の設定

次に「当たったらシーンを再起動」する機能を作成します。

1.  HierarchyビューでDanger Wallを選択します。
2.  InspectorビューでAdd Componentボタンをクリックします。
3.  New Scriptを選択し、「DangerWall」コンポーネントを作成します。
4.  Applyをクリックし、全てのPrefabへ反映させます。

##スクリプトの更新

まずは「接触したか」の判定を受けるコールバックを設定します。

1.  DangerWall.csをMonodeveopで開きます。
2.  内容を以下の内容に変更します。

```
using UnityEngine;
using System.Collections;

public class DangerWall : MonoBehaviour
{
	// オブジェクトと接触した時に呼ばれるコールバック
	void OnCollisionEnter (Collision hit)
	{
		// 何かの処理
	}
}
```

###シーンの再読込

接触対象がPlayerタグを持つオブジェクトの場合、シーンを再読込します。

1.  再びDangerWall.csをMonobehaviourで開きます。
2.  コードを以下の内容に変更します。

```
using UnityEngine;
using System.Collections;

public class DangerWall : MonoBehaviour
{
	// オブジェクトと接触した時に呼ばれるコールバック
	void OnCollisionEnter (Collision hit)
	{
		// 接触したオブジェクトのタグが"Player"の場合
		if (hit.gameObject.CompareTag ("Player")) {
			// 現在のシーンを再読込する
			Application.LoadLevel(Application.loadedLevel);
		}
	}
}
```

